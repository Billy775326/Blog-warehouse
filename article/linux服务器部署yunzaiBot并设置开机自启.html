<p style="">(24年6月可用)</p><p style=""><strong><span style="font-size: 18px">新建一个Bot目录</span></strong></p><h1 style="" id="%E5%AE%89%E8%A3%85yunzai"><strong><span style="font-size: 24px">安装yunzai</span></strong></h1><p style="">https://github.com/TimeRainStarSky/Yunzai</p><h2 style="" id="%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85yunzai">手动安装yunzai</h2><blockquote><p style="">环境准备：Windows/Linux/MacOS/Android<br><a rel="nofollow" href="https://nodejs.org/"><u>Node.js(&gt;=v21)</u></a>, <a rel="nofollow" href="https://redis.io/"><u>Redis</u></a>, <a rel="nofollow" href="https://git-scm.com/"><u>Git</u></a>, <a rel="nofollow" href="https://google.cn/chrome"><u>Chrome(可选)</u></a></p></blockquote><ol><li><p style="">Git Clone 项目</p></li></ol><p style="text-align: start; ">请根据网络情况选择使用 GitHub 或 Gitee 安装</p><pre><code class="language-bash">git clone --depth 1 https://github.com/TimeRainStarSky/Yunzai
git clone --depth 1 https://gitee.com/TimeRainStarSky/Yunzai
cd Yunzai</code></pre><ol start="2"><li><p style="">安装 <a rel="nofollow" href="https://pnpm.io/zh/installation"><u>pnpm</u></a> 和依赖</p></li></ol><pre><code class="language-bash">npm i -g pnpm
pnpm i</code></pre><p style="">安装完成之后退出yunzai目录</p><h1 style="" id="%E5%AE%89%E8%A3%85napcatqq"><strong><span style="font-size: 24px">安装NapCatQQ</span></strong></h1><p style="">于Bot文件根目录下安装</p><p style="">https://napneko.github.io/zh-CN/guide/getting-started</p><h2 style="" id="linux%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC">linux一键脚本</h2><p style="">墙裂推荐！</p><pre><code class="language-bash">curl -o napcat.sh https://fastly.jsdelivr.net/gh/NapNeko/NapCat-Installer@master/script/install.sh &amp;&amp; sudo bash napcat.sh </code></pre><p style="text-align: start; ; line-height: 24px">安装完成后 启动脚本<code>sudo bash napcat.sh </code></p><p style="text-align: start; ; line-height: 24px">扫码登录</p><h2 style="" id="webui%E9%85%8D%E7%BD%AE"><strong><span style="font-size: 20px">WebUI配置</span></strong></h2><p style="text-align: start; ; line-height: 24px">如果你已经启动了 NapCat，并且有多于 1 个开放端口，则可以通过 WebUI 进行配置。</p><p style="text-align: start; ; line-height: 24px">默认端口为 <code>6099</code>。当端口被占用时，会自动对端口 +1，直到找到可用端口，端口号会在启动时显示。</p><p style="text-align: start; ; line-height: 24px">启动后打开 <code>./config/webui.json</code> 文件，token 密码可在其中找到。</p><pre><code class="language-bash">{
    "port": 6099, // WebUI 端口
    "token": "xxxx", //登录密钥，默认是自动生成的随机登录密码
    "loginRate": 3, //每分钟登录次数限制
}</code></pre><p style="text-align: start; ; line-height: 24px">访问 <code>http://IP:端口/webui/login.html</code>，然后进行以下操作：</p><p style="">1.启用反向websocket打开</p><p style="">2.添加一条地址 ws://127.0.0.1:2536/OneBotv11</p><p style=""></p><h1 style="" id="%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><strong><span style="font-size: 24px">设置开机自启</span></strong></h1><h2 style="" id="yunzai"><strong><span style="font-size: 20px">yunzai</span></strong></h2><p style="">yunzai前台运行(可跳过)</p><div style="overflow-x: auto; overflow-y: hidden;"><table style="width: 244px"><colgroup><col style="width: 107px"><col style="width: 137px"></colgroup><tbody><tr style="box-sizing: border-box; background-color: var(--bgColor-default, var(--color-canvas-default)); border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><th colspan="1" rowspan="1" colwidth="107" style="box-sizing: border-box; padding: 6px 13px; font-weight: var(--base-text-weight-semibold, 600); border: 1px solid var(--borderColor-default, var(--color-border-default));"><p style="">操作</p></th><th colspan="1" rowspan="1" colwidth="137" style="box-sizing: border-box; padding: 6px 13px; font-weight: var(--base-text-weight-semibold, 600); border: 1px solid var(--borderColor-default, var(--color-border-default));"><p style="">命令</p></th></tr><tr style="box-sizing: border-box; background-color: var(--bgColor-default, var(--color-canvas-default)); border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td colspan="1" rowspan="1" colwidth="107" style="box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--borderColor-default, var(--color-border-default));"><p style="">启动</p></td><td colspan="1" rowspan="1" colwidth="137" style="box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--borderColor-default, var(--color-border-default));"><p style="">node .</p></td></tr><tr style="box-sizing: border-box; background-color: var(--bgColor-muted, var(--color-canvas-subtle)); border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td colspan="1" rowspan="1" colwidth="107" style="box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--borderColor-default, var(--color-border-default));"><p style="">停止</p></td><td colspan="1" rowspan="1" colwidth="137" style="box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--borderColor-default, var(--color-border-default));"><p style="">node . stop</p></td></tr></tbody></table></div><p style="">yunzai开机自启</p><pre><code class="language-bash">pnpm start
pnpm pm2 save
pnpm pm2 startup</code></pre><p style=""></p><h2 style="" id="napcatqq"><strong><span style="font-size: 20px">NapCatQQ</span></strong></h2><p style="">bash 绝对路径/napcat.sh -q xxxxxx(机器人qq号)</p><p style="">举例:bash /root/bot/napcat.sh -q xxxxxx(qq号)</p><p style=""></p><p style="">如何在 Ubuntu 上实现开机自启 <code>bash /home/Bot/NapCat/napcat.sh -q 2772757923</code> 这个命令，并确保有足够的权限运行。下面是如何创建和配置一个 systemd 服务来实现这个目的：</p><h3 style="" id="%E5%88%9B%E5%BB%BA-systemd-%E6%9C%8D%E5%8A%A1%E6%96%87%E4%BB%B6">创建 systemd 服务文件</h3><h4 style="" id="%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%96%87%E4%BB%B6"><strong>创建服务文件</strong></h4><ol><li><p style="">使用你喜欢的文本编辑器创建一个新的服务文件，例如 <code>napcat.service</code>：</p><pre><code class="language-bash">sudo nano /etc/systemd/system/napcat.service</code></pre></li><li><p style=""><strong>添加以下内容到服务文件</strong></p><pre><code class="language-bash">[Unit] 
Description=NapCat 
Service After=network.target

[Service] 
Type=simple 
ExecStart=/bin/bash /home/Bot/NapCat/napcat.sh -q xxxxxxxxx
User=root 
Restart=on-failure 

[Install] 
WantedBy=multi-user.target</code></pre><p style="">请确保 <code>User=root</code> 或者是你希望运行脚本的用户。</p></li><li><p style=""><strong>保存并关闭文件</strong></p></li></ol><h4 style="" id="%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BD-systemd-%E5%B9%B6%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1">重新加载 systemd 并启动服务</h4><ol><li><p style=""><strong>重新加载 systemd 配置</strong></p><pre><code class="language-bash">sudo systemctl daemon-reload</code></pre></li><li><p style=""><strong>启动服务</strong></p><pre><code class="language-bash">sudo systemctl start napcat.service</code></pre></li><li><p style=""><strong>使服务开机自启</strong></p><pre><code class="language-bash">sudo systemctl enable napcat.service</code></pre></li></ol><h1 style="" id="%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%AA%8C%E8%AF%81%E9%85%8D%E7%BD%AE%E5%8F%AF%E7%94%A8">重启服务器验证配置可用</h1><p style=""></p><p style=""></p>